<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]> ><! <![endif]-->
<html class='no-js' lang='en'>
  <!-- <![endif] -->
  <head>
    <meta charset='utf-8' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <title>Matt Sears | Easy Multiple Account Management for Heroku</title>
    <meta content='Matt Sears, Matt, Sears' name='keywords' />
    <meta author='Matt Sears' />
    <link href='http://feeds.feedburner.com/mattsears' rel='alternate' title='Feed for mattsears' type='application/atom+xml' />
    <link href='/images/favicon.png' rel='shortcut icon' />
    <link href='/fonts/ss-social.css' rel='stylesheet' />
    <link href="/stylesheets/app.css?1357089829" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <nav>
      <div class='row'></div>
    </nav>
    <div class='row'>
      <div class='twelve columns centered'>
        <div class='row'>
  <div class='seven columns centered'>
    <header class='text-center'>
      <a href='/'>
        <img class='me' height='100' src='/images/matt-sears.png' width='100' />
      </a>
      <h3>
        Matt Sears
      </h3>
    </header>
  </div>
</div>
<div class='row'>
  <div class='ten column centered'>
    <article>
      <header class='text-center'>
        <h2>
          <a href='/articles/2011/10/12/gaga-key-value-store'>
            Gaga, A Git-Backed Key/Value Store
          </a>
        </h2>
        <h5>
          Written by
          <a href='#'>Matt</a>
          on
          /
          Oct 12
        </h5>
      </header>
      <div class='row'>
        <div class='ten column centered'>
          <p>Gaga originated from my winning entry in Codebrawl&#39;s <a href="http://codebrawl.com/contests/key-value-stores">Key/Value
Store</a> contest. The challenge
was to write the best key/value storage backend you can think of. Since Git is
fast, reliable, and a great tool for storing source code, I was really
interested in making an easy way to store key/values.</p>

<p>Built with <a href="https://github.com/mojombo/grit">Grit</a>, Gaga supports SET, GET, KEYS,
and DELETE operations. And since it&#39;s Git, we can easily enhance it to include
other awesome Git features such as branches, diffs, reverting, etc.</p>

<h4>Usage</h4>
<div class="highlight"><pre><span class="vi">@gaga</span> <span class="o">=</span> <span class="no">Gaga</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:repo</span> <span class="o">=&gt;</span> <span class="s1">&#39;/path/to/repo&#39;</span><span class="p">)</span>

<span class="c1"># SET</span>
<span class="vi">@gaga</span><span class="o">[</span><span class="s1">&#39;lady&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;gaga&quot;</span>

<span class="c1"># GET</span>
<span class="vi">@gaga</span><span class="o">[</span><span class="s1">&#39;lady&#39;</span><span class="o">]</span> <span class="c1">#=&gt; &quot;gaga&quot;</span>

<span class="c1"># KEYS</span>
<span class="vi">@gaga</span><span class="o">.</span><span class="n">keys</span>  <span class="c1">#=&gt; [&#39;lady&#39;]</span>

<span class="c1"># DELETE</span>
<span class="vi">@gaga</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;lady&#39;</span><span class="p">)</span> <span class="c1">#=&gt; &#39;gaga&#39;</span>

<span class="c1"># Remove all items from the store</span>
<span class="vi">@gaga</span><span class="o">.</span><span class="n">clear</span>
</pre></div>
<p>That works pretty well. Now, we can harness the power of Git and enhance our data
store. For example, we can get a history log for a specific key:</p>
<div class="highlight"><pre><span class="c1"># LOG</span>
<span class="vi">@gaga</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;lady&#39;</span><span class="p">)</span>

<span class="c1"># Produces:</span>
<span class="o">[</span>
 <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;all clear&quot;</span><span class="p">,</span><span class="s2">&quot;committer&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Matt Sears&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;matt@mattsears.com&quot;</span><span class="p">},</span> <span class="s2">&quot;committed_date&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2011-09-05...&quot;</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;set &#39;lady&#39; &quot;</span><span class="p">,</span> <span class="s2">&quot;committer&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Matt Sears&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;matt@mattsears.com&quot;</span><span class="p">},</span> <span class="s2">&quot;committed_date&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2011-09-05...&quot;</span><span class="p">}</span>
 <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;delete &#39;lady&#39; &quot;</span><span class="p">,</span> <span class="s2">&quot;committer&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Matt Sears&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;matt@mattsears.com&quot;</span><span class="p">},</span> <span class="s2">&quot;committed_date&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;2011-09-05...&quot;</span><span class="p">}</span>
<span class="o">]</span>
</pre></div>
<p>This is just a start. There&#39;s still a lot things we can add.  If you are interested in more detailed information, check out the repo
on <a href="https://github.com/mattsears/gaga">Github</a>.</p>
          <hr />
        </div>
      </div>
    </article>
  </div>
</div>
<div class='row'>
  <div class='ten column centered'>
    <article>
      <header class='text-center'>
        <h2>
          <a href='/articles/2011/05/15/print-stamps-with-ruby'>
            Print Stamps With Ruby!
          </a>
        </h2>
        <h5>
          Written by
          <a href='#'>Matt</a>
          on
          /
          May 15
        </h5>
      </header>
      <div class='row'>
        <div class='ten column centered'>
          <p>I&#39;ve just released <a href="https://github.com/mattsears/stamps">Stamps</a> - A Ruby gem for creating postage labels,
calculate the shipping cost of packages, standardize domestic
addresses via USPS CASS certified Address Matching Software, and track
shipments using the Stamps.com Web Services API.</p>

<h4>Quick Start</h4>

<p>First, you will need to register for a (free) developer account at
<a href="http://developer.stamps.com/developer">Stamps.com</a>. Once you receive
your test credentials and integration id, just plug them into the
configuration block:</p>
<div class="highlight"><pre><span class="no">Stamps</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">integration_id</span> <span class="o">=</span> <span class="s1">&#39;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXX&#39;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">username</span>       <span class="o">=</span> <span class="s1">&#39;STAMPS USERNAME&#39;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">password</span>       <span class="o">=</span> <span class="s1">&#39;STAMPS PASSWORD&#39;</span>
<span class="k">end</span>
</pre></div>
<p>For a simple test, we can call <code>Stamps.account</code> to retreive
information about the account.  By default, Stamps will return all
responses as a Hash.</p>

<h4>Create a Stamp</h4>

<p>First, we need to standardize the shipping address that complies with the USPS address
formatting guidelines:</p>
<div class="highlight"><pre><span class="n">standardized_address</span> <span class="o">=</span> <span class="no">Stamps</span><span class="o">.</span><span class="n">clean_address</span><span class="p">(</span>
  <span class="ss">:address</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="ss">:full_name</span> <span class="o">=&gt;</span> <span class="s1">&#39;The White House&#39;</span><span class="p">,</span>
    <span class="ss">:address1</span>  <span class="o">=&gt;</span> <span class="s1">&#39;1600 Pennsylvania Avenue, NW&#39;</span><span class="p">,</span>
    <span class="ss">:city</span>      <span class="o">=&gt;</span> <span class="s1">&#39;Washington&#39;</span><span class="p">,</span>
    <span class="ss">:state</span>     <span class="o">=&gt;</span> <span class="s1">&#39;DC&#39;</span><span class="p">,</span>
    <span class="ss">:zip_code</span>  <span class="o">=&gt;</span> <span class="s1">&#39;20500&#39;</span>
<span class="p">})</span>
</pre></div>
<p>Now that we have a clean address we can create a new stamp.  The
<code>Stamps.create!</code> takes the sender and receiver address along with parameters
on the rate:</p>
<div class="highlight"><pre><span class="n">stamp</span> <span class="o">=</span> <span class="no">Stamps</span><span class="o">.</span><span class="n">create!</span><span class="p">(</span>
    <span class="ss">:rate</span>          <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="ss">:from_zip_code</span> <span class="o">=&gt;</span> <span class="s1">&#39;45440&#39;</span><span class="p">,</span>
      <span class="ss">:to_zip_code</span>   <span class="o">=&gt;</span> <span class="s1">&#39;20500&#39;</span><span class="p">,</span>
      <span class="ss">:weight_oz</span>     <span class="o">=&gt;</span> <span class="s1">&#39;6.5&#39;</span><span class="p">,</span>
      <span class="ss">:ship_date</span>      <span class="o">=&gt;</span> <span class="no">Date</span><span class="o">.</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="p">),</span>
      <span class="ss">:package_type</span>   <span class="o">=&gt;</span> <span class="s1">&#39;Package&#39;</span><span class="p">,</span>
      <span class="ss">:service_type</span>   <span class="o">=&gt;</span> <span class="s1">&#39;US-FC&#39;</span>  <span class="c1"># Flat-rate</span>
    <span class="p">},</span>
    <span class="ss">:to</span>            <span class="o">=&gt;</span> <span class="n">standardized_address</span><span class="p">,</span>
    <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="ss">:full_name</span>   <span class="o">=&gt;</span> <span class="s1">&#39;Littlelines&#39;</span><span class="p">,</span>
      <span class="ss">:address1</span>    <span class="o">=&gt;</span> <span class="s1">&#39;50 Chestnut Street&#39;</span><span class="p">,</span>
      <span class="ss">:address2</span>    <span class="o">=&gt;</span> <span class="s1">&#39;Suite 234&#39;</span><span class="p">,</span>
      <span class="ss">:city</span>        <span class="o">=&gt;</span> <span class="s1">&#39;Beavervcreek&#39;</span><span class="p">,</span>
      <span class="ss">:state</span>       <span class="o">=&gt;</span> <span class="s1">&#39;OH&#39;</span><span class="p">,</span>
      <span class="ss">:zip_code</span>    <span class="o">=&gt;</span> <span class="s1">&#39;45440&#39;</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
<h4>Hooray!</h4>

<p>That&#39;s it! Stamps will return a url of the stamp.  Print it and ship it!</p>
<div class="highlight"><pre><span class="n">stamp</span><span class="o">[</span><span class="ss">:url</span><span class="o">]</span>
</pre></div>
<p>If you are interested in more detailed information, check out the repo
on <a href="https://github.com/mattsears/stamps">Github</a>.</p>
          <hr />
        </div>
      </div>
    </article>
  </div>
</div>
<div class='row'>
  <div class='ten column centered'>
    <article>
      <header class='text-center'>
        <h2>
          <a href='/articles/2011/01/11/easy-multiple-account-management-for-heroku'>
            Easy Multiple Account Management for Heroku
          </a>
        </h2>
        <h5>
          Written by
          <a href='#'>Matt</a>
          on
          /
          Jan 11
        </h5>
      </header>
      <div class='row'>
        <div class='ten column centered'>
          <p>Recently, I migrated all of my personal and <a href="http://littlelines.com">business</a> sites
to <a href="http://heroku.com">Heroku</a>. Heroku, as you may know, is a fantastic
service for hosting ruby applications. Oh, and it&#39;s free!</p>

<p>Like a lot of folks, I keep work and personal items such
as email, bank accounts, github, etc in separate accounts.
Heroku doesn&#39;t really place nice with multiple accounts.</p>

<p>So how to do we effectively manage multiple Heroku accounts?</p>

<h4>Prerequitites</h4>

<p>The following assumes you are on the Mac OS or *nix system, own
multiple Heroku accounts, and have installed the Heroku gem. I should
also be point out that you will need to create separate ssh
public keys for each account.</p>

<h4>Custom Ruby Script</h4>

<p>One option is we can use a script such as Keith Gaddis
<a href="http://collectiveidea.com/blog/archives/2010/08/06/heroku-ing-with-multiple-personalities">describes</a>
over at the Collective Idea blog. With his <a href="https://gist.github.com/511789">switcher</a> script, we can
switch between two accounts like this:</p>
<div class="highlight"><pre><span class="n">ruby</span> <span class="n">switcher</span><span class="p">.</span><span class="n">rb</span> <span class="n">personal</span>
<span class="n">ruby</span> <span class="n">switcher</span><span class="p">.</span><span class="n">rb</span> <span class="n">work</span>
</pre></div>
<p>This essentially swaps the credentials file (used by the Heroku gem
for authentication) for the account you want to
use. This works well enough, however this can be tedious especially if
you switch between work and personal projects frequently.</p>

<h4>Enter Heroku Accounts Plugin</h4>

<p>David Dollar of Heroku recently released an official Heroku
plugin called <a href="https://github.com/ddollar/heroku-accounts">heroku-accounts</a>. With
this plugin, we can switch Heroku accounts automatically.</p>

<p>To get started, we first install the plugin:</p>
<div class="highlight"><pre><span class="n">heroku</span> <span class="n">plugins</span><span class="p">:</span><span class="n">install</span> <span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ddollar</span><span class="o">/</span><span class="n">heroku</span><span class="o">-</span><span class="n">accounts</span><span class="p">.</span><span class="n">git</span>
</pre></div>
<p>The installation process will download the plugin from github and save
it to the <code>~/.heroku/plugins</code> directory. Now, we can
setup each of our Heroku accounts with <code>add</code> command:</p>
<div class="highlight"><pre><span class="n">heroku</span> <span class="n">accounts</span><span class="p">:</span><span class="n">add</span> <span class="n">work</span>
</pre></div>
<p>and for our personal account, we can run:</p>
<div class="highlight"><pre><span class="n">heroku</span> <span class="n">accounts</span><span class="p">:</span><span class="n">add</span> <span class="n">personal</span>
</pre></div>
<p>The <code>add</code> command will ask you for your Heroku email address and
password for each account. The plugin will maintain
your account credentials in the <code>~/.heroku/accounts</code> folder in your
home directory. (Passwords are not saved in plain text)</p>

<p>To assign a project to a specific Heroku account, we run the following
command in the project root:</p>
<div class="highlight"><pre><span class="n">heroku</span> <span class="n">accounts</span><span class="p">:</span><span class="n">set</span> <span class="n">personal</span> # <span class="n">or</span> <span class="n">work</span>
</pre></div>
<p>This will assign a Heroku account to the project by adding an &#39;account&#39; variable
to the project&#39;s git config file.</p>

<h4>Celebrate</h4>

<p>Hooray! Now we can switch Heroku accounts automatically. Awesome.</p>
          <hr />
        </div>
      </div>
    </article>
  </div>
</div>
<div class='row ten columns centered paginator'>
  <div class='row three columns'>
    <a href="/articles/p3">← Older posts</a>
  </div>
  <div class='row three columns text-right'>
    <a href="/articles">Newer posts →</a>
  </div>
</div>
        <section class='explore'>
          <div class='row'>
            <div class='ten columns centered'>
              <h5 class='text-center capitalize'>
                Explore articles from my blog
              </h5>
            </div>
          </div>
          <div class='row categories'>
            <div class='six columns text-center centered'>
              <ul class='no-bullet'>
                <li>
                  <a href='/articles/tags/git'>
                    Git
                  </a>
                </li>
                <li>
                  <a href='/articles/tags/ruby'>
                    Ruby
                  </a>
                </li>
                <li>
                  <a href='/articles/tags/clojure'>
                    Clojure
                  </a>
                </li>
                <li>
                  <a href='/articles/tags/rspec'>
                    Rspec
                  </a>
                </li>
                <li>
                  <a href='/articles/tags/minitest'>
                    Minitest
                  </a>
                </li>
                <li>
                  <a href='/articles'>Everything</a>
                </li>
              </ul>
            </div>
          </div>
          <div class='row'>
            <div class='six columns centered'>
              <form action='http://google.com/search' method='get'>
                <fieldset role='search'>
                  <input name='q' type='hidden' value='site:mattsears.com' />
                  <input class='search' name='q' placeholder='... or search this site (via Google)' results='0' type='text' />
                </fieldset>
              </form>
            </div>
          </div>
        </section>
        <section class='browse'>
          <div class='row'>
            <div class='ten columns centered'>
              <div class='row'>
                <div class='six mobile-four columns'>
                  <h5>
                    <b>
                      Popular:
                    </b>
                    The most visited articles:
                  </h5>
                  <hr />
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/12/10/minitest-quick-reference'>
                        Minitest Quick Reference
                      </a>
                    </div>
                  </div>
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>
                        Nyan Cat RSpec Formatter
                      </a>
                    </div>
                  </div>
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>
                        Ruby Blocks as Dynamic Callbacks
                      </a>
                    </div>
                  </div>
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2009/06/06/20-clojure-links-to-get-you-up-to-speed'>
                        20 Clojure Links To Get You Up To Speed
                      </a>
                    </div>
                  </div>
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/10/12/gaga-key-value-store'>
                        Gaga, A Git-Backed Key/Value Store
                      </a>
                    </div>
                  </div>
                </div>
                <div class='six mobile-four columns'>
                  <h5>
                    <b>
                      New:
                    </b>
                    My most recent articles:
                  </h5>
                  <hr />
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/12/10/minitest-quick-reference'>
                        Minitest Quick Reference
                      </a>
                    </div>
                  </div>
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>
                        Ruby Blocks as Dynamic Callbacks
                      </a>
                    </div>
                  </div>
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>
                        Nyan Cat RSpec Formatter
                      </a>
                    </div>
                  </div>
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/10/12/gaga-key-value-store'>
                        Gaga, A Git-Backed Key/Value Store
                      </a>
                    </div>
                  </div>
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/05/15/print-stamps-with-ruby'>
                        Print Stamps With Ruby!
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <footer class='row text-center'>
          <div class='twelve columns'>
            <div class='row'>
              <div class='twelve columns'>
                <p>
                  You should follow me on
                  <a href='https://twitter.com/mattsears' rel='external'>Twitter</a>
                  and subscribe to
                  my
                  <a href='http://feeds.feedburner.com/mattsears'>RSS</a>
                  feed. Trust me.
                  <br />
                  Copyright © 2012 Matt Sears.
                </p>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        //
          var _gauges = _gauges || [];
          (function() {
            var t   = document.createElement('script');
            t.type  = 'text/javascript';
            t.async = true;
            t.id    = 'gauges-tracker';
            t.setAttribute('data-site-id', '4fb913d1f5a1f50be2000073');
            t.src = '//secure.gaug.es/track.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(t, s);
          })();
        //
      //]]>
    </script>
    <script src="/javascripts/all.js?1357090071" type="text/javascript"></script>
  </body>
</html>
