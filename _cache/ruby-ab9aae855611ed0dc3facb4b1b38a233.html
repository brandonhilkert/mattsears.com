<div class="highlight"><pre><code class="ruby"><span class="nb">require</span> <span class="s1">&#39;minitest/autorun&#39;</span>

<span class="k">class</span> <span class="nc">Twipster</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">twitter</span><span class="p">)</span>
    <span class="c1"># A Ruby wrapper for the Twitter API</span>
    <span class="vi">@twitter</span> <span class="o">=</span> <span class="n">twitter</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span>
    <span class="vi">@twitter</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">tweet</span><span class="si">}</span><span class="s2"> #lolhipster&quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">describe</span> <span class="no">Twipster</span><span class="p">,</span> <span class="s2">&quot;Make every tweet a hipster tweet.&quot;</span> <span class="k">do</span>
  <span class="n">before</span> <span class="k">do</span>
    <span class="vi">@twitter</span>  <span class="o">=</span> <span class="no">MiniTest</span><span class="o">::</span><span class="no">Mock</span><span class="o">.</span><span class="n">new</span>
    <span class="vi">@twipster</span> <span class="o">=</span> <span class="no">Twipster</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@twitter</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">&quot;should append a #lolhipster hashtag and update Twitter with our status&quot;</span> <span class="k">do</span>
    <span class="n">tweet</span> <span class="o">=</span> <span class="s2">&quot;Skyrim? Too mainstream.&quot;</span>
    <span class="vi">@twitter</span><span class="o">.</span><span class="n">expect</span> <span class="ss">:update</span><span class="p">,</span> <span class="kp">true</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">tweet</span><span class="si">}</span><span class="s2"> #lolhipster&quot;</span><span class="o">]</span>
    <span class="vi">@twipster</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span>
    <span class="n">assert</span> <span class="vi">@twitter</span><span class="o">.</span><span class="n">verify</span> <span class="c1"># verifies tweet and hashtag was passed to `@twitter.update`</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>
