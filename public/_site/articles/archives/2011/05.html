<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir='ltr' lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-type' />
    <title>Matt Sears | Archives 2011</title>
    <meta content='Matt Sears, Matt, Sears' name='keywords' />
    <meta author='Matt Sears' />
    <link href='http://feeds.feedburner.com/mattsears' rel='alternate' title='Feed for mattsears' type='application/atom+xml' />
    <link href='/images/favicon.png' rel='shortcut icon' />
    <link href='/style.css' media='all' rel='stylesheet' type='text/css' />
    <!--[if IE 6]>
      <link rel="stylesheet" href="css/ie6.css" type="text/css" media="all" />
    <![endif]-->
    <script charset='utf-8' src='/javascripts/jquery-1.4.2.min.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/cufon-yui.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/titillium_400_mod2.font.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/titillium_800_mod2.font.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/cross-fade.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/jquery.tipsy.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/application.js' type='text/javascript'></script>
  </head>
  <body class='articles'>
    <div class='page-bg'>&nbsp;</div>
    <div id='header'>
      <div class='shell'>
        <div class='cl'>&nbsp;</div>
        <a href='/'>
          <h1 class='nocufon' id='logo'></h1>
        </a>
        <div class='right'>
          <div class='cl'>&nbsp;</div>
          <div id='navigation'>
            <ul>
              <li class='home-link'>
                <a href='/'>Home</a>
              </li>
              <li class='divider'>/</li>
              <li class='articles-link'>
                <a href='/articles'>Articles</a>
              </li>
              <li class='divider'>/</li>
              <li class='tumblr-link'>
                <a href='http://mattsears.tumblr.com'>Notebook</a>
              </li>
              <li class='divider'>/</li>
              <li class='about-link'>
                <a href='/about'>About</a>
              </li>
            </ul>
          </div>
          <div class='cl'>&nbsp;</div>
        </div>
        <div class='cl'>&nbsp;</div>
      </div>
    </div>
    <div id='main'>
      <div class='shell'>
          <div id='content'>
            <div id='content-top'></div>
            <div class='posts'>
              <div class='post rounded-top'>
                <div class='head'>
                  <h2>
                    <a href='/articles/2011/5/15/print-stamps-with-ruby'>
                      Print Stamps With Ruby!
                    </a>
                    <span>
                      <a class='dsq-comment-count comment-link commentslink' href='http://www.mattsears.com/articles/2011/5/15/print-stamps-with-ruby#disqus_thread'></a>
                    </span>
                  </h2>
                  <div class='cl'>&nbsp;</div>
                </div>
                <div class='body'>
                  <p class='with-border'>
                    <p>I've just released <a href="https://github.com/mattsears/stamps">Stamps</a> - A Ruby gem for creating postage labels,
                    calculate the shipping cost of packages, standardize domestic
                    addresses via USPS CASS certified Address Matching Software, and track
                    shipments using the Stamps.com Web Services API.</p><h3>Quick Start</h3><p>First, you will need to register for a (free) developer account at
                    <a href="http://developer.stamps.com/developer">Stamps.com</a>. Once you receive
                    your test credentials and integration id, just plug them into the
                    configuration block:</p><div class="highlight">
                    <pre><span class="no">Stamps</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>&#x000A;  <span class="n">config</span><span class="o">.</span><span class="n">integration_id</span> <span class="o">=</span> <span class="s1">'XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXX'</span>&#x000A;  <span class="n">config</span><span class="o">.</span><span class="n">username</span>       <span class="o">=</span> <span class="s1">'STAMPS USERNAME'</span>&#x000A;  <span class="n">config</span><span class="o">.</span><span class="n">password</span>       <span class="o">=</span> <span class="s1">'STAMPS PASSWORD'</span>&#x000A;<span class="k">end</span></pre>
                    </div><p>For a simple test, we can call <code>Stamps.account</code> to retreive
                    information about the account.  By default, Stamps will return all
                    responses as a Hash.</p><h3>Create a Stamp</h3><p>First, we need to standardize the shipping address that complies with the USPS address
                    formatting guidelines:</p><div class="highlight">
                    <pre><span class="n">standardized_address</span> <span class="o">=</span> <span class="no">Stamps</span><span class="o">.</span><span class="n">clean_address</span><span class="p">(</span>&#x000A;  <span class="ss">:address</span> <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;    <span class="ss">:full_name</span> <span class="o">=&gt;</span> <span class="s1">'The White House'</span><span class="p">,</span>&#x000A;    <span class="ss">:address1</span>  <span class="o">=&gt;</span> <span class="s1">'1600 Pennsylvania Avenue, NW'</span><span class="p">,</span>&#x000A;    <span class="ss">:city</span>      <span class="o">=&gt;</span> <span class="s1">'Washington'</span><span class="p">,</span>&#x000A;    <span class="ss">:state</span>     <span class="o">=&gt;</span> <span class="s1">'DC'</span><span class="p">,</span>&#x000A;    <span class="ss">:zip_code</span>  <span class="o">=&gt;</span> <span class="s1">'20500'</span>&#x000A;<span class="p">})</span></pre>
                    </div><p>Now that we have a clean address we can create a new stamp.  The
                    <code>Stamps.create!</code> takes the sender and receiver address along with parameters
                    on the rate:</p><div class="highlight">
                    <pre><span class="n">stamp</span> <span class="o">=</span> <span class="no">Stamps</span><span class="o">.</span><span class="n">create!</span><span class="p">(</span>&#x000A;    <span class="ss">:rate</span>          <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;      <span class="ss">:from_zip_code</span> <span class="o">=&gt;</span> <span class="s1">'45440'</span><span class="p">,</span>&#x000A;      <span class="ss">:to_zip_code</span>   <span class="o">=&gt;</span> <span class="s1">'20500'</span><span class="p">,</span>&#x000A;      <span class="ss">:weight_oz</span>     <span class="o">=&gt;</span> <span class="s1">'6.5'</span><span class="p">,</span>&#x000A;      <span class="ss">:ship_date</span>      <span class="o">=&gt;</span> <span class="no">Date</span><span class="o">.</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%Y-%m-%d'</span><span class="p">),</span>&#x000A;      <span class="ss">:package_type</span>   <span class="o">=&gt;</span> <span class="s1">'Package'</span><span class="p">,</span>&#x000A;      <span class="ss">:service_type</span>   <span class="o">=&gt;</span> <span class="s1">'US-FC'</span>  <span class="c1"># Flat-rate</span>&#x000A;    <span class="p">},</span>&#x000A;    <span class="ss">:to</span>            <span class="o">=&gt;</span> <span class="n">standardized_address</span><span class="p">,</span>&#x000A;    <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;      <span class="ss">:full_name</span>   <span class="o">=&gt;</span> <span class="s1">'Littlelines'</span><span class="p">,</span>&#x000A;      <span class="ss">:address1</span>    <span class="o">=&gt;</span> <span class="s1">'50 Chestnut Street'</span><span class="p">,</span>&#x000A;      <span class="ss">:address2</span>    <span class="o">=&gt;</span> <span class="s1">'Suite 234'</span><span class="p">,</span>&#x000A;      <span class="ss">:city</span>        <span class="o">=&gt;</span> <span class="s1">'Beavervcreek'</span><span class="p">,</span>&#x000A;      <span class="ss">:state</span>       <span class="o">=&gt;</span> <span class="s1">'OH'</span><span class="p">,</span>&#x000A;      <span class="ss">:zip_code</span>    <span class="o">=&gt;</span> <span class="s1">'45440'</span>&#x000A;    <span class="p">}</span>&#x000A;<span class="p">)</span></pre>
                    </div><h3>Hooray!</h3><p>That's it! Stamps will return a url of the stamp.  Print it and ship it!</p><div class="highlight">
                    <pre><span class="n">stamp</span><span class="o">[</span><span class="ss">:url</span><span class="o">]</span></pre>
                    </div><p>If you are interested in more detailed information, check out the repo
                    on <a href="https://github.com/mattsears/stamps">Github</a>.</p>
                  </p>
                </div>
              </div>
              <div class='post-bottom'>
                <script type='text/javascript'>
                  //<![CDATA[
                    var disqus_shortname = 'mattsears'; // required: replace example with your forum shortname
                    var disqus_identifier = "/articles/2011/5/15/print-stamps-with-ruby/";
                    var disqus_url = "http://www.mattsears.com/articles/2011/5/15/print-stamps-with-ruby";
                  //]]>
                </script>
              </div>
            </div>
          </div>
          <div id='sidebar'>
            <div class='get-in-touch'>
              <div class='me'>
                <img class='fade' src='/images/me.png' style='background: url(/images/me!.png)' />
              </div>
              <p>
                Hi. I'm Matt Sears, a web developer
                <span class='amp'>&</span>
                entrepreneur in Ohio. I run
                <a href='http://littlelines.com' rel='external'>Littlelines,</a>
                a distinguished web development and design firm.
              </p>
            </div>
            <div class='rubyrags'>
              <a href='http://rubyrags.com' rel='external'>
                <h2 class='nocufon'>RubyRags</h2>
                <p>Shirts for Ruby Nerds And Ruby on Rails Junkies</p>
              </a>
            </div>
            <div class='elsewhere'>
              <ul>
                <li>
                  <a class='small-ico-twitter' href='https://twitter.com/mattsears' rel='external'>
                    Follow Me on Twitter
                  </a>
                </li>
              </ul>
            </div>
            <div class='recent-posts'>
              <h4>Recent Posts</h4>
              <ul>
                <li>
                  <a href='/articles/2011/12/10/minitest-quick-reference'>Minitest Quick Reference</a>
                </li>
                <li>
                  <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>Ruby Blocks as Dynamic Callbacks</a>
                </li>
                <li>
                  <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>Nyan Cat RSpec Formatter</a>
                </li>
                <li>
                  <a href='/articles/2011/10/20/gaga-key-value-store'>Gaga: A Git-Backed Key/Value Store</a>
                </li>
                <li>
                  <a href='/articles/2011/5/15/print-stamps-with-ruby'>Print Stamps With Ruby!</a>
                </li>
              </ul>
            </div>
            <div class='categories'>
              <h4>Categories</h4>
              <ul>
                <li>
                  <a href='/articles/tags/ruby'>ruby</a>
                </li>
                <li>
                  <a href='/articles/tags/git'>git</a>
                </li>
                <li>
                  <a href='/articles/tags/rails'>rails</a>
                </li>
                <li>
                  <a href='/articles/tags/clojure'>clojure</a>
                </li>
                <li>
                  <a href='/articles/tags/code'>code</a>
                </li>
                <li>
                  <a href='/articles/tags/projects'>projects</a>
                </li>
                <li>
                  <a href='/articles/tags/sinatra'>sinatra</a>
                </li>
                <li>
                  <a href='/articles/tags/conference'>conference</a>
                </li>
                <li>
                  <a href='/articles/tags/capistrano'>capistrano</a>
                </li>
                <li>
                  <a href='/articles/tags/passenger'>passenger</a>
                </li>
                <li>
                  <a href='/articles/tags/littlelines'>littlelines</a>
                </li>
                <li>
                  <a href='/articles/tags/architecture'>architecture</a>
                </li>
                <li>
                  <a href='/articles/tags/news'>news</a>
                </li>
              </ul>
            </div>
            <div class='archives'>
              <h4>Archives</h4>
              <ul>
                <li>
                  <a href='/articles/archives/2011/12'>December 2011 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2011/11'>November 2011 (2)</a>
                </li>
                <li>
                  <a href='/articles/archives/2011/10'>October 2011 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2011/05'>May 2011 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2011/01'>January 2011 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2009/10'>October 2009 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2009/06'>June 2009 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2009/04'>April 2009 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/12'>December 2008 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/11'>November 2008 (2)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/08'>August 2008 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/07'>July 2008 (5)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/01'>January 2008 (1)</a>
                </li>
              </ul>
            </div>
          </div>
          <div class='cl'>&nbsp;</div>
        </div>
    </div>
    <div id='footer'>
      <div class='shell'>
        <div class='left'>
          <p>&copy; Copyright 2012 Matt Sears. All Rights Reserved.</p>
        </div>
        <p class='footer-navigation'>
          Powered by
          <a href='http://mattsears.github.com/aerial' rel='external'>Aerial</a>
          on
          <a href='http://heroku.com' rel='external'>Heroku</a>
        </p>
        <div class='cl'>&nbsp;</div>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        Cufon.now();
        //
        (function () {
          var disqus_shortname = 'mattsears';
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        //
        
        var _gauges = _gauges || [];
        (function() {
          var t   = document.createElement('script');
          t.type  = 'text/javascript';
          t.async = true;
          t.id    = 'gauges-tracker';
          t.setAttribute('data-site-id', '4fb913d1f5a1f50be2000073');
          t.src = '//secure.gaug.es/track.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(t, s);
        })();
      //]]>
    </script>
  </body>
</html>
