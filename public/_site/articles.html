<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir='ltr' lang='en-US' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-type' />
    <title>Matt Sears | Articles</title>
    <meta content='Matt Sears, Matt, Sears' name='keywords' />
    <meta author='Matt Sears' />
    <link href='http://feeds.feedburner.com/mattsears' rel='alternate' title='Feed for mattsears' type='application/atom+xml' />
    <link href='/images/favicon.png' rel='shortcut icon' />
    <link href='/style.css' media='all' rel='stylesheet' type='text/css' />
    <!--[if IE 6]>
      <link rel="stylesheet" href="css/ie6.css" type="text/css" media="all" />
    <![endif]-->
    <script charset='utf-8' src='/javascripts/jquery-1.4.2.min.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/cufon-yui.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/titillium_400_mod2.font.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/titillium_800_mod2.font.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/cross-fade.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/jquery.tipsy.js' type='text/javascript'></script>
    <script charset='utf-8' src='/javascripts/application.js' type='text/javascript'></script>
  </head>
  <body class='articles'>
    <div class='page-bg'>&nbsp;</div>
    <div id='header'>
      <div class='shell'>
        <div class='cl'>&nbsp;</div>
        <a href='/'>
          <h1 class='nocufon' id='logo'></h1>
        </a>
        <div class='right'>
          <div class='cl'>&nbsp;</div>
          <div id='navigation'>
            <ul>
              <li class='home-link'>
                <a href='/'>Home</a>
              </li>
              <li class='divider'>/</li>
              <li class='articles-link'>
                <a href='/articles'>Articles</a>
              </li>
              <li class='divider'>/</li>
              <li class='tumblr-link'>
                <a href='http://mattsears.tumblr.com'>Notebook</a>
              </li>
              <li class='divider'>/</li>
              <li class='about-link'>
                <a href='/about'>About</a>
              </li>
            </ul>
          </div>
          <div class='cl'>&nbsp;</div>
        </div>
        <div class='cl'>&nbsp;</div>
      </div>
    </div>
    <div id='main'>
      <div class='shell'>
          <div id='content'>
            <div id='content-top'></div>
            <div class='posts'>
              <div class='post rounded-top'>
                <div class='head'>
                  <h2>
                    <a href='/articles/2011/12/10/minitest-quick-reference'>
                      Minitest Quick Reference
                    </a>
                    <span>
                      <a class='dsq-comment-count comment-link commentslink' href='http://www.mattsears.com/articles/2011/12/10/minitest-quick-reference#disqus_thread'></a>
                    </span>
                  </h2>
                  <div class='cl'>&nbsp;</div>
                </div>
                <div class='body'>
                  <p class='with-border'>
                    <p><a href="https://github.com/seattlerb/minitest">MiniTest</a>, as the name suggests, is a
                    small and fast unit testing framework. Shipped with Ruby 1.9, MiniTest supports
                    a complete suite of testing capabilities such as TDD, BDD, mocking, and benchmarking.</p><p>This quick reference aims to demonstrate MiniTest's main concepts and
                    provide real world examples to get you acquainted quickly. Let's start with
                    MiniTest::Spec.</p><h2>MiniTest::Spec</h2><p>Provides RSpec-like matchers and contexts right out of the box.</p><div class="highlight">
                    <pre><span class="nb">require</span> <span class="s1">'minitest/autorun'</span>&#x000A;&#x000A;<span class="n">describe</span> <span class="no">Hipster</span><span class="p">,</span> <span class="s2">"Demonstration of MiniTest"</span> <span class="k">do</span>&#x000A;  <span class="n">before</span> <span class="k">do</span>&#x000A;    <span class="vi">@hipster</span> <span class="o">=</span> <span class="no">Hipster</span><span class="o">.</span><span class="n">new</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="n">after</span> <span class="k">do</span>&#x000A;    <span class="vi">@hipster</span><span class="o">.</span><span class="n">destroy!</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="n">subject</span> <span class="k">do</span>&#x000A;    <span class="nb">Array</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">tap</span> <span class="k">do</span> <span class="o">|</span><span class="n">attributes</span><span class="o">|</span>&#x000A;      <span class="n">attributes</span> <span class="o">&lt;&lt;</span> <span class="s2">"silly hats"</span>&#x000A;      <span class="n">attributes</span> <span class="o">&lt;&lt;</span> <span class="s2">"skinny jeans"</span>&#x000A;    <span class="k">end</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="n">let</span><span class="p">(</span><span class="ss">:list</span><span class="p">)</span> <span class="p">{</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span> <span class="p">}</span>&#x000A;&#x000A;  <span class="n">describe</span> <span class="s2">"when asked about the font"</span> <span class="k">do</span>&#x000A;    <span class="n">it</span> <span class="s2">"should be helvetica"</span> <span class="k">do</span>&#x000A;      <span class="vi">@hipster</span><span class="o">.</span><span class="n">preferred_font</span><span class="o">.</span><span class="n">must_equal</span> <span class="s2">"helvetica"</span>&#x000A;    <span class="k">end</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="n">describe</span> <span class="s2">"when asked about mainstream"</span> <span class="k">do</span>&#x000A;    <span class="n">it</span> <span class="s2">"won't be mainstream"</span> <span class="k">do</span>&#x000A;      <span class="vi">@hipster</span><span class="o">.</span><span class="n">mainstream?</span><span class="o">.</span><span class="n">wont_equal</span> <span class="kp">true</span>&#x000A;    <span class="k">end</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre>
                    </div><h3>Matchers (must | wont)</h3><p>In most cases you can switch between <code>must</code> for positive expectations and <code>wont</code>
                    for negative expectations.</p><table>
                    <thead><tr>
                    <td align="left">Assertion</td>
                    <td align="left">Examples</td>
                    </tr></thead>
                    <tbody>
                    <tr>
                    <td align="left"><code>must_be</code></td>
                    <td align="left"><code>list.size.must_be :==, 0</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_be_close_to</code></td>
                    <td align="left"><code>subject.size.must_be_close_to 1,1</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_be_empty</code></td>
                    <td align="left"><code>list.must_be_empty</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_be_instance_of</code></td>
                    <td align="left"><code>list.must_be_instance_of Array</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_be_kind_of</code></td>
                    <td align="left"><code>list.must_be_kind_of Enumerable</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_be_nil</code></td>
                    <td align="left"><code>list.first.must_be_nil</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_be_same_as</code></td>
                    <td align="left"><code>subject.must_be_same_as subject</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_be_silent</code></td>
                    <td align="left"><code>proc { "no stdout or stderr" }.must_be_silent</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_be_within_epsilon</code></td>
                    <td align="left"><code>subject.size.must_be_within_epsilon 1,1</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_equal</code></td>
                    <td align="left"><code>subject.size.must_equal 2</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_include</code></td>
                    <td align="left"><code>subject.must_include "skinny jeans"</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_match</code></td>
                    <td align="left"><code>subject.first.must_match /silly/</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_output</code></td>
                    <td align="left"><code>proc { print "#{subject.size}!" }.must_output "2!"</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_respond_to</code></td>
                    <td align="left"><code>subject.must_respond_to :count</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_raise</code></td>
                    <td align="left"><code>proc { subject.foo }.must_raise NoMethodError</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_send</code></td>
                    <td align="left"><code>subject.must_send [subject, :values_at, 0]</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>must_throw</code></td>
                    <td align="left"><code>proc { throw :done if subject.any? }.must_throw :done</code></td>
                    </tr>
                    </tbody>
                    </table>
                    <h2>MiniTest::Unit::TestCase</h2><p>Provides a rich set of assertions to make your tests clean and readable.</p><div class="highlight">
                    <pre><span class="nb">require</span> <span class="s1">'minitest/autorun'</span>&#x000A;&#x000A;<span class="k">class</span> <span class="nc">TestHipster</span> <span class="o">&lt;</span> <span class="no">MiniTest</span><span class="o">::</span><span class="no">Unit</span><span class="o">::</span><span class="no">TestCase</span>&#x000A;  <span class="k">def</span> <span class="nf">setup</span>&#x000A;    <span class="vi">@hipster</span> <span class="o">=</span> <span class="no">Hipster</span><span class="o">.</span><span class="n">new</span>&#x000A;    <span class="vi">@list</span>    <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>&#x000A;    <span class="vi">@subject</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"silly hats"</span><span class="p">,</span> <span class="s2">"skinny jeans"</span><span class="o">]</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="k">def</span> <span class="nf">teardown</span>&#x000A;    <span class="vi">@hipster</span><span class="o">.</span><span class="n">destroy!</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="k">def</span> <span class="nf">test_for_helvetica_font</span>&#x000A;    <span class="n">assert_equal</span> <span class="s2">"helvetica!"</span><span class="p">,</span> <span class="vi">@hipster</span><span class="o">.</span><span class="n">preferred_font</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="k">def</span> <span class="nf">test_not_mainstream</span>&#x000A;    <span class="n">refute</span> <span class="vi">@hipster</span><span class="o">.</span><span class="n">mainstream?</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre>
                    </div><h3>Assertions (assert | refute)</h3><p>Toggle between <code>assert</code> for positive assertions and <code>refute</code> for negative assertions.</p><table>
                    <thead><tr>
                    <td align="left">Assertion</td>
                    <td align="left">Example</td>
                    </tr></thead>
                    <tbody>
                    <tr>
                    <td align="left"><code>assert</code></td>
                    <td align="left"><code>assert @subject.any?, "empty subjects"</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_block</code></td>
                    <td align="left"><code>assert_block { @subject.any? }</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_empty</code></td>
                    <td align="left"><code>assert_empty @list</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_equal</code></td>
                    <td align="left"><code>assert_equal 2, @subject.size</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_in_delta</code></td>
                    <td align="left"><code>assert_in_delta @subject.size, 1,1</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_in_epsilon</code></td>
                    <td align="left"><code>assert_in_epsilon @subject.size, 1, 1</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_includes</code></td>
                    <td align="left"><code>assert_includes @subject, "skinny jeans"</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_instance_of</code></td>
                    <td align="left"><code>assert_instance_of Array, @list</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_kind_of</code></td>
                    <td align="left"><code>assert_kind_of Enumerable, @list</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_match</code></td>
                    <td align="left"><code>assert_match @subject.first, /silly/</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_nil</code></td>
                    <td align="left"><code>assert_nil @list.first</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_operator</code></td>
                    <td align="left"><code>assert_operator @list.size, :== , 0</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_output</code></td>
                    <td align="left"><code>assert_output("Size: 2") { print "Size: #{@subject.size}"}</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_raises</code></td>
                    <td align="left"><code>assert_raises(NoMethodError) { @subject.foo }</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_respond_to</code></td>
                    <td align="left"><code>assert_respond_to @subject, :count</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_same</code></td>
                    <td align="left"><code>assert_same @subject, @subject, "It's the same object silly"</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_send</code></td>
                    <td align="left"><code>assert_send [@subject, :values_at, 0]</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_silent</code></td>
                    <td align="left"><code>assert_silent { "no stdout or stderr" }</code></td>
                    </tr>
                    <tr>
                    <td align="left"><code>assert_throws</code></td>
                    <td align="left"><code>assert_throws(:error,'is empty') {throw :error if @subject.any?}</code></td>
                    </tr>
                    </tbody>
                    </table>
                    <h2>MiniTest::Mock</h2><p>A simple and clean mock system. There two essential methods at our disposal:
                    <code>expect</code> and <code>verify</code>.</p><div class="highlight">
                    <pre><span class="nb">require</span> <span class="s1">'minitest/autorun'</span>&#x000A;&#x000A;<span class="k">class</span> <span class="nc">Twipster</span>&#x000A;  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">twitter</span><span class="p">)</span>&#x000A;    <span class="c1"># A Ruby wrapper for the Twitter API</span>&#x000A;    <span class="vi">@twitter</span> <span class="o">=</span> <span class="n">twitter</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span>&#x000A;    <span class="vi">@twitter</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">tweet</span><span class="si">}</span><span class="s2"> #lolhipster"</span><span class="p">)</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span>&#x000A;&#x000A;<span class="n">describe</span> <span class="no">Twipster</span><span class="p">,</span> <span class="s2">"Make every tweet a hipster tweet."</span> <span class="k">do</span>&#x000A;  <span class="n">before</span> <span class="k">do</span>&#x000A;    <span class="vi">@twitter</span>  <span class="o">=</span> <span class="no">MiniTest</span><span class="o">::</span><span class="no">Mock</span><span class="o">.</span><span class="n">new</span>&#x000A;    <span class="vi">@twipster</span> <span class="o">=</span> <span class="no">Twipster</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@twitter</span><span class="p">)</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="n">it</span> <span class="s2">"should append a #lolhipster hashtag and update Twitter with our status"</span> <span class="k">do</span>&#x000A;    <span class="n">tweet</span> <span class="o">=</span> <span class="s2">"Skyrim? Too mainstream."</span>&#x000A;    <span class="vi">@twitter</span><span class="o">.</span><span class="n">expect</span> <span class="ss">:update</span><span class="p">,</span> <span class="kp">true</span><span class="p">,</span> <span class="o">[</span><span class="s2">"</span><span class="si">#{</span><span class="n">tweet</span><span class="si">}</span><span class="s2"> #lolhipster"</span><span class="o">]</span>&#x000A;    <span class="vi">@twipster</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span>&#x000A;    <span class="n">assert</span> <span class="vi">@twitter</span><span class="o">.</span><span class="n">verify</span> <span class="c1"># verifies tweet and hashtag was passed to `@twitter.update`</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre>
                    </div><h2>Resources</h2><ol>
                    <li><a href="https://github.com/seattlerb/minitest">MiniTest on Github</a></li>
                    <li><a href="http://docs.seattlerb.org/minitest">MiniTest Rdoc</a></li>
                    <li><a href="http://metaskills.net/2011/03/26/using-minitest-spec-with-rails">Using MiniTest::Spec with Rails</a></li>
                    <li><a href="http://www.rubyinside.com/a-minitestspec-tutorial-elegant-spec-style-testing-that-comes-with-ruby-5354.html">Ruby Inside: A MiniTest::Spec Tutorial: Elegant Spec-Style Testing That Comes With Ruby</a></li>
                    </ol>
                    <p>I hope you found this quick guide valuable. Please let me know if you'd like
                    to see anything else included and feel free to ask questions or give feedback
                    in the comments section.</p>
                  </p>
                </div>
              </div>
              <div class='post-bottom'>
                <script type='text/javascript'>
                  //<![CDATA[
                    var disqus_shortname = 'mattsears'; // required: replace example with your forum shortname
                    var disqus_identifier = "/articles/2011/12/10/minitest-quick-reference/";
                    var disqus_url = "http://www.mattsears.com/articles/2011/12/10/minitest-quick-reference";
                  //]]>
                </script>
              </div>
              
              <div class='post rounded-top'>
                <div class='head'>
                  <h2>
                    <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>
                      Ruby Blocks as Dynamic Callbacks
                    </a>
                    <span>
                      <a class='dsq-comment-count comment-link commentslink' href='http://www.mattsears.com/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks#disqus_thread'></a>
                    </span>
                  </h2>
                  <div class='cl'>&nbsp;</div>
                </div>
                <div class='body'>
                  <p class='with-border'>
                    <p>Callbacks are a great technique for achieving simplicity and flexibility. Simply put,
                    a callback is a block of code passed as an argument to a method. In Ruby, code
                    blocks are everywhere and Ruby makes it trivial to pass a block of code to
                    methods. For example:</p><div class="highlight">
                    <pre><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>&#x000A;  <span class="n">callback</span> <span class="o">=</span> <span class="n">block</span>&#x000A;  <span class="n">callback</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>&#x000A;<span class="k">end</span>&#x000A;&#x000A;<span class="n">foo</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">}</span> <span class="c1"># =&gt; 25</span></pre>
                    </div><p>But what do we do when a method needs two blocks of code or more? Consider the
                    classic case where we want a method to execute a block of code if an action
                    succeeds or call different code if an action fails.</p><p>In this article, I will demonstrate how we can pass multiple blocks to a method and
                    with some metaprogramming, we can achieve a dynamic callback mechanism with just
                    a few lines of code.</p><p>Let's add a method called <code>callback</code> to the Proc class:</p><div class="highlight">
                    <pre><span class="k">class</span> <span class="nc">Proc</span>&#x000A;  <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">callable</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>&#x000A;    <span class="nb">self</span> <span class="o">===</span> <span class="no">Class</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span>&#x000A;      <span class="n">method_name</span> <span class="o">=</span> <span class="n">callable</span><span class="o">.</span><span class="n">to_sym</span>&#x000A;      <span class="n">define_method</span><span class="p">(</span><span class="n">method_name</span><span class="p">)</span> <span class="p">{</span> <span class="o">|&amp;</span><span class="n">block</span><span class="o">|</span> <span class="n">block</span><span class="o">.</span><span class="n">nil?</span> <span class="p">?</span> <span class="kp">true</span> <span class="p">:</span> <span class="n">block</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="p">}</span>&#x000A;      <span class="n">define_method</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">method_name</span><span class="si">}</span><span class="s2">?"</span><span class="p">)</span> <span class="p">{</span> <span class="kp">true</span> <span class="p">}</span>&#x000A;      <span class="k">def</span> <span class="nf">method_missing</span><span class="p">(</span><span class="n">method_name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span> <span class="kp">false</span><span class="p">;</span> <span class="k">end</span>&#x000A;    <span class="k">end</span><span class="o">.</span><span class="n">new</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre>
                    </div><p>That's it! The above <code>Proc#callback</code> method simply yields an anonymous class
                    with methods defined to handle our callbacks. This allows for the capability of
                    creating and storing dynamic callbacks, which can later be looked up and
                    executed as needed.</p><p>Notice anything unusual? We're using the <code>===</code> operand to invoke the
                    block. <code>Proc#===</code> is an alias for <code>Proc.call</code>. Anything on the right side of
                    <code>===</code> acts as the proc's parameter. Normally, this is to allow a proc object to
                    be a target of a <code>when</code> clause in case statements, but we're using it as a super
                    simple way of invoking our anonymous class.</p><p>Let&rsquo;s try it with something useful. Let&rsquo;s say we&rsquo;re writing something which
                    needs to happen in an all-or-nothing, atomic fashion. Either the whole thing
                    works, or none of it does.  A simple case is tweeting:</p><div class="highlight">
                    <pre><span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>&#x000A;  <span class="no">Twitter</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>&#x000A;  <span class="n">block</span><span class="o">.</span><span class="n">callback</span> <span class="ss">:success</span>&#x000A;<span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>&#x000A;  <span class="n">block</span><span class="o">.</span><span class="n">callback</span> <span class="ss">:failure</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span>&#x000A;<span class="k">end</span></pre>
                    </div><p>The <code>tweet</code> method accepts a message string and &amp;block parameters. We call
                    <code>callback</code> on the block and give it a name. Any name will work :success, :error,
                    :fail!, whatever. In addition, we can pass arguments to the blocks (more on that
                    later). Now we can provide a status if the tweet was successful or not:</p><div class="highlight">
                    <pre><span class="n">tweet</span> <span class="s2">"Ruby methods with multiple blocks. #lolruby"</span> <span class="k">do</span> <span class="o">|</span><span class="n">on</span><span class="o">|</span>&#x000A;  <span class="n">on</span><span class="o">.</span><span class="n">success</span> <span class="k">do</span>&#x000A;    <span class="nb">puts</span> <span class="s2">"Tweet successful!"</span>&#x000A;  <span class="k">end</span>&#x000A;  <span class="n">on</span><span class="o">.</span><span class="n">failure</span> <span class="k">do</span> <span class="o">|</span><span class="n">status</span><span class="o">|</span>&#x000A;    <span class="nb">puts</span> <span class="s2">"Error: </span><span class="si">#{</span><span class="n">status</span><span class="si">}</span><span class="s2">"</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre>
                    </div><p>The advantage here is that we define our own mini DSL. We don't need to worry
                    about passing too many or unexpected blocks. We could have easily said
                    <code>where.success</code> or <code>on.error</code> or <code>update.fail!</code>. Also note the <code>on.failure</code>
                    block includes a <code>status</code> parameter - this contains the exception message
                    captured in the <code>tweet</code> method above. So if Twitter was down for whatever
                    reason, the <code>on.failure</code> block would be invoked and printed 'Error: Twitter is
                    down or being upgraded'.</p><p>Bonus: In addition to wrapping code in blocks, our <code>Proc#callback</code> method
                    defines boolean style methods. So we could have call the tweet method like this
                    if we wanted to:</p><div class="highlight">
                    <pre><span class="n">tweet</span> <span class="s2">"Ruby methods with multiple blocks. #lolruby"</span> <span class="k">do</span> <span class="o">|</span><span class="n">update</span><span class="o">|</span>&#x000A;  <span class="nb">puts</span> <span class="s2">"Tweet successful!"</span> <span class="k">if</span> <span class="n">update</span><span class="o">.</span><span class="n">success?</span>&#x000A;  <span class="nb">puts</span> <span class="s2">"Sorry, something went wrong."</span> <span class="k">if</span> <span class="n">update</span><span class="o">.</span><span class="n">failure?</span>&#x000A;<span class="k">end</span></pre>
                    </div><p>Put the <code>Proc#callback</code> method in a utility library and your code will look neat and tidy.</p><p>As always, I welcome your thoughts and feedback. Let me know what you think of
                    the techniques shown here, or share your own favorite code block tricks.</p>
                  </p>
                </div>
              </div>
              <div class='post-bottom'>
                <script type='text/javascript'>
                  //<![CDATA[
                    var disqus_shortname = 'mattsears'; // required: replace example with your forum shortname
                    var disqus_identifier = "/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks/";
                    var disqus_url = "http://www.mattsears.com/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks";
                  //]]>
                </script>
              </div>
              
              <div class='post rounded-top'>
                <div class='head'>
                  <h2>
                    <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>
                      Nyan Cat RSpec Formatter
                    </a>
                    <span>
                      <a class='dsq-comment-count comment-link commentslink' href='http://www.mattsears.com/articles/2011/11/16/nyan-cat-rspec-formatter#disqus_thread'></a>
                    </span>
                  </h2>
                  <div class='cl'>&nbsp;</div>
                </div>
                <div class='body'>
                  <p class='with-border'>
                    <p>I watch a lot of tests run in a given day. So I figured why not make it more
                    fun. Inspired by <a href="https://github.com/seattlerb/minitest">minitest</a>'s pride, and um
                    cats? I came up with a <a href="http://www.youtube.com/watch?v=QH2-TGUlwu4">Nyan Cat</a>
                    inspired RSpec formatter.</p><p>Update: After last week's launch, Nyan Cat received a great response from the
                    Ruby world. Over the weekend, I released version 0.0.2.  It includes a few bug
                    fixes and some really cool enhancements. Most notably, Nyan Cat now spans
                    multiple lines. In addition, it displays running totals of passing, pending,
                    and failed specs. Thanks to everyone who contributed! Checkout the new
                    screencast below.</p><pre><code>-_-_-_-_-_-_-_,------,&#x000A;_-_-_-_-_-_-_-|   /\_/\&#x000A;-_-_-_-_-_-_-~|__( ^ .^)&#x000A;_-_-_-_-_-_-_-""  ""&#x000A;</code></pre><h2>Nyan Cat</h2><p>Much like <a href="https://github.com/kapoq/nyan">Nyan</a>, Nyan Cat simply creates a rainbow
                    trail of test results. It counts the number of examples as they execute and
                    highlights failed and pending specs. The rainbow changes colors as it runs and
                    if all the specs pass, Nyan Cat falls asleep.  If there are any pending or
                    failing specs, Nyan cat is concerned and can't sleep.</p><p>Here's a short demo of Nyan Cat in action.</p><p></p>
                    <center>
                      <iframe src="http://player.vimeo.com/video/32424001?title=0&amp;byline=0&amp;portrait=0" width="640" height="480" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                    </center><p>Installing Nyan Cat is easy. Just install the gem <code>nyan-cat-formatter</code> and simply put the options in your .rspec file:</p><pre><code>--format NyanCatFormatter&#x000A;</code></pre><p>Checkout the code on <a href="https://github.com/mattsears/nyan-cat-formatter">Github</a>
                    and let me know how you like it.  If you run into any issues, please create an
                    issue on Github and I will be sure to get it fixed. Of course you can always
                    fork the project and send me a pull request.</p><p>Have fun!</p>
                  </p>
                </div>
              </div>
              <div class='post-bottom'>
                <script type='text/javascript'>
                  //<![CDATA[
                    var disqus_shortname = 'mattsears'; // required: replace example with your forum shortname
                    var disqus_identifier = "/articles/2011/11/16/nyan-cat-rspec-formatter/";
                    var disqus_url = "http://www.mattsears.com/articles/2011/11/16/nyan-cat-rspec-formatter";
                  //]]>
                </script>
              </div>
              
              <div class='post rounded-top'>
                <div class='head'>
                  <h2>
                    <a href='/articles/2011/10/20/gaga-key-value-store'>
                      Gaga: A Git-Backed Key/Value Store
                    </a>
                    <span>
                      <a class='dsq-comment-count comment-link commentslink' href='http://www.mattsears.com/articles/2011/10/20/gaga-key-value-store#disqus_thread'></a>
                    </span>
                  </h2>
                  <div class='cl'>&nbsp;</div>
                </div>
                <div class='body'>
                  <p class='with-border'>
                    <p>Gaga originated from my winning entry in Codebrawl's <a href="http://codebrawl.com/contests/key-value-stores">Key/Value
                    Store</a> contest. The challenge
                    was to write the best key/value storage backend you can think of. Since Git is
                    fast, reliable, and a great tool for storing source code, I was really
                    interested in making an easy way to store key/values.</p><p>Built with <a href="https://github.com/mojombo/grit">Grit</a>, Gaga supports SET, GET, KEYS,
                    and DELETE operations. And since it's Git, we can easily enhance it to include
                    other awesome Git features such as branches, diffs, reverting, etc.</p><h2>Usage</h2><div class="highlight">
                    <pre><span class="vi">@gaga</span> <span class="o">=</span> <span class="no">Gaga</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:repo</span> <span class="o">=&gt;</span> <span class="s1">'/path/to/repo'</span><span class="p">)</span>&#x000A;&#x000A;<span class="c1"># SET</span>&#x000A;<span class="vi">@gaga</span><span class="o">[</span><span class="s1">'lady'</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"gaga"</span>&#x000A;&#x000A;<span class="c1"># GET</span>&#x000A;<span class="vi">@gaga</span><span class="o">[</span><span class="s1">'lady'</span><span class="o">]</span> <span class="c1">#=&gt; "gaga"</span>&#x000A;&#x000A;<span class="c1"># KEYS</span>&#x000A;<span class="vi">@gaga</span><span class="o">.</span><span class="n">keys</span>  <span class="c1">#=&gt; ['lady']</span>&#x000A;&#x000A;<span class="c1"># DELETE</span>&#x000A;<span class="vi">@gaga</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">'lady'</span><span class="p">)</span> <span class="c1">#=&gt; 'gaga'</span>&#x000A;&#x000A;<span class="c1"># Remove all items from the store</span>&#x000A;<span class="vi">@gaga</span><span class="o">.</span><span class="n">clear</span></pre>
                    </div><p>That works pretty well. Now, we can harness the power of Git and enhance our data
                    store. For example, we can get a history log for a specific key:</p><div class="highlight">
                    <pre><span class="c1"># LOG</span>&#x000A;<span class="vi">@gaga</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'lady'</span><span class="p">)</span>&#x000A;&#x000A;<span class="c1"># Produces:</span>&#x000A;<span class="o">[</span>&#x000A; <span class="p">{</span><span class="s2">"message"</span><span class="o">=&gt;</span><span class="s2">"all clear"</span><span class="p">,</span><span class="s2">"committer"</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">"name"</span><span class="o">=&gt;</span><span class="s2">"Matt Sears"</span><span class="p">,</span> <span class="s2">"email"</span><span class="o">=&gt;</span><span class="s2">"matt@mattsears.com"</span><span class="p">},</span> <span class="s2">"committed_date"</span><span class="o">=&gt;</span><span class="s2">"2011-09-05..."</span><span class="p">},</span>&#x000A; <span class="p">{</span><span class="s2">"message"</span><span class="o">=&gt;</span><span class="s2">"set 'lady' "</span><span class="p">,</span> <span class="s2">"committer"</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">"name"</span><span class="o">=&gt;</span><span class="s2">"Matt Sears"</span><span class="p">,</span> <span class="s2">"email"</span><span class="o">=&gt;</span><span class="s2">"matt@mattsears.com"</span><span class="p">},</span> <span class="s2">"committed_date"</span><span class="o">=&gt;</span><span class="s2">"2011-09-05..."</span><span class="p">}</span>&#x000A; <span class="p">{</span><span class="s2">"message"</span><span class="o">=&gt;</span><span class="s2">"delete 'lady' "</span><span class="p">,</span> <span class="s2">"committer"</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">"name"</span><span class="o">=&gt;</span><span class="s2">"Matt Sears"</span><span class="p">,</span> <span class="s2">"email"</span><span class="o">=&gt;</span><span class="s2">"matt@mattsears.com"</span><span class="p">},</span> <span class="s2">"committed_date"</span><span class="o">=&gt;</span><span class="s2">"2011-09-05..."</span><span class="p">}</span>&#x000A;<span class="o">]</span></pre>
                    </div><p>This is just a start. There's still a lot things we can add.  If you are interested in more detailed information, check out the repo
                    on <a href="https://github.com/mattsears/gaga">Github</a>.</p>
                  </p>
                </div>
              </div>
              <div class='post-bottom'>
                <script type='text/javascript'>
                  //<![CDATA[
                    var disqus_shortname = 'mattsears'; // required: replace example with your forum shortname
                    var disqus_identifier = "/articles/2011/10/20/gaga-key-value-store/";
                    var disqus_url = "http://www.mattsears.com/articles/2011/10/20/gaga-key-value-store";
                  //]]>
                </script>
              </div>
              
              <div class='post rounded-top'>
                <div class='head'>
                  <h2>
                    <a href='/articles/2011/5/15/print-stamps-with-ruby'>
                      Print Stamps With Ruby!
                    </a>
                    <span>
                      <a class='dsq-comment-count comment-link commentslink' href='http://www.mattsears.com/articles/2011/5/15/print-stamps-with-ruby#disqus_thread'></a>
                    </span>
                  </h2>
                  <div class='cl'>&nbsp;</div>
                </div>
                <div class='body'>
                  <p class='with-border'>
                    <p>I've just released <a href="https://github.com/mattsears/stamps">Stamps</a> - A Ruby gem for creating postage labels,
                    calculate the shipping cost of packages, standardize domestic
                    addresses via USPS CASS certified Address Matching Software, and track
                    shipments using the Stamps.com Web Services API.</p><h3>Quick Start</h3><p>First, you will need to register for a (free) developer account at
                    <a href="http://developer.stamps.com/developer">Stamps.com</a>. Once you receive
                    your test credentials and integration id, just plug them into the
                    configuration block:</p><div class="highlight">
                    <pre><span class="no">Stamps</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>&#x000A;  <span class="n">config</span><span class="o">.</span><span class="n">integration_id</span> <span class="o">=</span> <span class="s1">'XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXX'</span>&#x000A;  <span class="n">config</span><span class="o">.</span><span class="n">username</span>       <span class="o">=</span> <span class="s1">'STAMPS USERNAME'</span>&#x000A;  <span class="n">config</span><span class="o">.</span><span class="n">password</span>       <span class="o">=</span> <span class="s1">'STAMPS PASSWORD'</span>&#x000A;<span class="k">end</span></pre>
                    </div><p>For a simple test, we can call <code>Stamps.account</code> to retreive
                    information about the account.  By default, Stamps will return all
                    responses as a Hash.</p><h3>Create a Stamp</h3><p>First, we need to standardize the shipping address that complies with the USPS address
                    formatting guidelines:</p><div class="highlight">
                    <pre><span class="n">standardized_address</span> <span class="o">=</span> <span class="no">Stamps</span><span class="o">.</span><span class="n">clean_address</span><span class="p">(</span>&#x000A;  <span class="ss">:address</span> <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;    <span class="ss">:full_name</span> <span class="o">=&gt;</span> <span class="s1">'The White House'</span><span class="p">,</span>&#x000A;    <span class="ss">:address1</span>  <span class="o">=&gt;</span> <span class="s1">'1600 Pennsylvania Avenue, NW'</span><span class="p">,</span>&#x000A;    <span class="ss">:city</span>      <span class="o">=&gt;</span> <span class="s1">'Washington'</span><span class="p">,</span>&#x000A;    <span class="ss">:state</span>     <span class="o">=&gt;</span> <span class="s1">'DC'</span><span class="p">,</span>&#x000A;    <span class="ss">:zip_code</span>  <span class="o">=&gt;</span> <span class="s1">'20500'</span>&#x000A;<span class="p">})</span></pre>
                    </div><p>Now that we have a clean address we can create a new stamp.  The
                    <code>Stamps.create!</code> takes the sender and receiver address along with parameters
                    on the rate:</p><div class="highlight">
                    <pre><span class="n">stamp</span> <span class="o">=</span> <span class="no">Stamps</span><span class="o">.</span><span class="n">create!</span><span class="p">(</span>&#x000A;    <span class="ss">:rate</span>          <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;      <span class="ss">:from_zip_code</span> <span class="o">=&gt;</span> <span class="s1">'45440'</span><span class="p">,</span>&#x000A;      <span class="ss">:to_zip_code</span>   <span class="o">=&gt;</span> <span class="s1">'20500'</span><span class="p">,</span>&#x000A;      <span class="ss">:weight_oz</span>     <span class="o">=&gt;</span> <span class="s1">'6.5'</span><span class="p">,</span>&#x000A;      <span class="ss">:ship_date</span>      <span class="o">=&gt;</span> <span class="no">Date</span><span class="o">.</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%Y-%m-%d'</span><span class="p">),</span>&#x000A;      <span class="ss">:package_type</span>   <span class="o">=&gt;</span> <span class="s1">'Package'</span><span class="p">,</span>&#x000A;      <span class="ss">:service_type</span>   <span class="o">=&gt;</span> <span class="s1">'US-FC'</span>  <span class="c1"># Flat-rate</span>&#x000A;    <span class="p">},</span>&#x000A;    <span class="ss">:to</span>            <span class="o">=&gt;</span> <span class="n">standardized_address</span><span class="p">,</span>&#x000A;    <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;      <span class="ss">:full_name</span>   <span class="o">=&gt;</span> <span class="s1">'Littlelines'</span><span class="p">,</span>&#x000A;      <span class="ss">:address1</span>    <span class="o">=&gt;</span> <span class="s1">'50 Chestnut Street'</span><span class="p">,</span>&#x000A;      <span class="ss">:address2</span>    <span class="o">=&gt;</span> <span class="s1">'Suite 234'</span><span class="p">,</span>&#x000A;      <span class="ss">:city</span>        <span class="o">=&gt;</span> <span class="s1">'Beavervcreek'</span><span class="p">,</span>&#x000A;      <span class="ss">:state</span>       <span class="o">=&gt;</span> <span class="s1">'OH'</span><span class="p">,</span>&#x000A;      <span class="ss">:zip_code</span>    <span class="o">=&gt;</span> <span class="s1">'45440'</span>&#x000A;    <span class="p">}</span>&#x000A;<span class="p">)</span></pre>
                    </div><h3>Hooray!</h3><p>That's it! Stamps will return a url of the stamp.  Print it and ship it!</p><div class="highlight">
                    <pre><span class="n">stamp</span><span class="o">[</span><span class="ss">:url</span><span class="o">]</span></pre>
                    </div><p>If you are interested in more detailed information, check out the repo
                    on <a href="https://github.com/mattsears/stamps">Github</a>.</p>
                  </p>
                </div>
              </div>
              <div class='post-bottom'>
                <script type='text/javascript'>
                  //<![CDATA[
                    var disqus_shortname = 'mattsears'; // required: replace example with your forum shortname
                    var disqus_identifier = "/articles/2011/5/15/print-stamps-with-ruby/";
                    var disqus_url = "http://www.mattsears.com/articles/2011/5/15/print-stamps-with-ruby";
                  //]]>
                </script>
              </div>
            </div>
          </div>
          <div id='sidebar'>
            <div class='get-in-touch'>
              <div class='me'>
                <img class='fade' src='/images/me.png' style='background: url(/images/me!.png)' />
              </div>
              <p>
                Hi. I'm Matt Sears, a web developer
                <span class='amp'>&</span>
                entrepreneur in Ohio. I run
                <a href='http://littlelines.com' rel='external'>Littlelines,</a>
                a distinguished web development and design firm.
              </p>
            </div>
            <div class='rubyrags'>
              <a href='http://rubyrags.com' rel='external'>
                <h2 class='nocufon'>RubyRags</h2>
                <p>Shirts for Ruby Nerds And Ruby on Rails Junkies</p>
              </a>
            </div>
            <div class='elsewhere'>
              <ul>
                <li>
                  <a class='small-ico-twitter' href='https://twitter.com/mattsears' rel='external'>
                    Follow Me on Twitter
                  </a>
                </li>
              </ul>
            </div>
            <div class='recent-posts'>
              <h4>Recent Posts</h4>
              <ul>
                <li>
                  <a href='/articles/2011/12/10/minitest-quick-reference'>Minitest Quick Reference</a>
                </li>
                <li>
                  <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>Ruby Blocks as Dynamic Callbacks</a>
                </li>
                <li>
                  <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>Nyan Cat RSpec Formatter</a>
                </li>
                <li>
                  <a href='/articles/2011/10/20/gaga-key-value-store'>Gaga: A Git-Backed Key/Value Store</a>
                </li>
                <li>
                  <a href='/articles/2011/5/15/print-stamps-with-ruby'>Print Stamps With Ruby!</a>
                </li>
              </ul>
            </div>
            <div class='categories'>
              <h4>Categories</h4>
              <ul>
                <li>
                  <a href='/articles/tags/ruby'>ruby</a>
                </li>
                <li>
                  <a href='/articles/tags/git'>git</a>
                </li>
                <li>
                  <a href='/articles/tags/rails'>rails</a>
                </li>
                <li>
                  <a href='/articles/tags/clojure'>clojure</a>
                </li>
                <li>
                  <a href='/articles/tags/code'>code</a>
                </li>
                <li>
                  <a href='/articles/tags/projects'>projects</a>
                </li>
                <li>
                  <a href='/articles/tags/sinatra'>sinatra</a>
                </li>
                <li>
                  <a href='/articles/tags/conference'>conference</a>
                </li>
                <li>
                  <a href='/articles/tags/capistrano'>capistrano</a>
                </li>
                <li>
                  <a href='/articles/tags/passenger'>passenger</a>
                </li>
                <li>
                  <a href='/articles/tags/littlelines'>littlelines</a>
                </li>
                <li>
                  <a href='/articles/tags/architecture'>architecture</a>
                </li>
                <li>
                  <a href='/articles/tags/news'>news</a>
                </li>
              </ul>
            </div>
            <div class='archives'>
              <h4>Archives</h4>
              <ul>
                <li>
                  <a href='/articles/archives/2011/12'>December 2011 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2011/11'>November 2011 (2)</a>
                </li>
                <li>
                  <a href='/articles/archives/2011/10'>October 2011 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2011/05'>May 2011 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2011/01'>January 2011 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2009/10'>October 2009 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2009/06'>June 2009 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2009/04'>April 2009 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/12'>December 2008 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/11'>November 2008 (2)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/08'>August 2008 (1)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/07'>July 2008 (5)</a>
                </li>
                <li>
                  <a href='/articles/archives/2008/01'>January 2008 (1)</a>
                </li>
              </ul>
            </div>
          </div>
          <div class='cl'>&nbsp;</div>
        </div>
    </div>
    <div id='footer'>
      <div class='shell'>
        <div class='left'>
          <p>&copy; Copyright 2012 Matt Sears. All Rights Reserved.</p>
        </div>
        <p class='footer-navigation'>
          Powered by
          <a href='http://mattsears.github.com/aerial' rel='external'>Aerial</a>
          on
          <a href='http://heroku.com' rel='external'>Heroku</a>
        </p>
        <div class='cl'>&nbsp;</div>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        Cufon.now();
        //
        (function () {
          var disqus_shortname = 'mattsears';
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        //
        
        var _gauges = _gauges || [];
        (function() {
          var t   = document.createElement('script');
          t.type  = 'text/javascript';
          t.async = true;
          t.id    = 'gauges-tracker';
          t.setAttribute('data-site-id', '4fb913d1f5a1f50be2000073');
          t.src = '//secure.gaug.es/track.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(t, s);
        })();
      //]]>
    </script>
  </body>
</html>
